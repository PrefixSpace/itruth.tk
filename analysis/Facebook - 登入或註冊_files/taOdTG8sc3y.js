if (self.CavalryLogger) { CavalryLogger.start_js(["XCA4Z"]); }

__d("MLogoutClearCache",["MCache","Stratcom"],(function(a,b,c,d,e,f,g,h){h.listen("click","logout",g.clear)}),null);
__d("KaiOSSendMessageUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={Type:Object.freeze({HANDLE_BACK:"handle_back",MESSAGE_RECEIVED:"received",OPEN_URL:"open_url",REGISTER_PUSH:"register_push",SCREEN_ORIENTATION_LOCK:"screen_orientation_lock",UNREGISTER_PUSH:"unregister_push",CHECK_FOR_PUSH_UPDATE:"check_for_push_update",PUSH_UPDATE_COMPLETED:"push_update_completed",SET_VOLUME:"set_volume",FBT_STRINGS:"fbt_strings",CONFIG_RESPONSE:"config_response",FETCH_MSISDN:"fetch_msisdn",GET_CONTACTS:"get_contacts"}),Action:"action",ActionPayload:"payload",CallbackID:"callback_id",postMessage:function(a,b,c,d){if(a&&b){var e=new Map();e.set(g.Action,b);c&&e.set(g.ActionPayload,c);d&&e.set(g.CallbackID,d);a.postMessage(e,"*")}}};e.exports=g}),null);
__d("KaiOSControllerUtils",["KaiOSSendMessageUtil"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="app://m.facebook.com";function i(){this.callbacks=new Map(),this.nextCallbackID=1}i.prototype.setCallback=function(a){var b=(this.nextCallbackID++).toString();this.callbacks.set(b,a);return b};i.prototype.handleCallback=function(a,b){if(a){var c=this.callbacks.get(a);c&&(this.callbacks["delete"](a),c(b));return!0}return!1};function j(){this.hostWindow=null,this.resolveOnConnect=null}j.prototype.receiveMessage=function(event){if(!event||h!=event.origin||!event.source)return!1;if(event.data==="ping"){this.hostWindow=event.source;g.postMessage(this.hostWindow,g.Type.MESSAGE_RECEIVED);var a=this.resolveOnConnect;a!=null&&(a(),this.resolveOnConnect=null)}return!0};a={createCallbackHandler:function(){return new i()},createConnectionHelper:function(){return new j()},sendBasicPost:function(a,b){var c=new XMLHttpRequest();c.open("POST",a);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a=[];for(var d in b)a.push(d+"="+b[d]);c.send(a.join("&"))}};e.exports=a}),null);
__d("KaiOSFullscreenVideoHandler",["KaiOSSendMessageUtil","getActiveElement"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({RIGHT:6,LEFT:4,UP:2,DOWN:8,MIDDLE:5}),j=Object.freeze({KEY:"type",DOWN:-1,UP:1});function a(a){this.hostWindow=a}a.prototype.handleKeyDownEvent=function(event){__p&&__p();var a=this.getVideoIfFullScreen();if(!a)return!1;if(event.key==="SoftLeft"){document.exitFullscreen();return!0}else if(event.key==="SoftRight"){a.muted=!a.muted;return!0}return!1};a.prototype.handleClickEvent=function(event){var a=this.getVideoIfFullScreen();if(!a)return!1;this.togglePause(a);return!0};a.prototype.handleMouseMoveEvent=function(event){return!1};a.prototype.getVideoIfFullScreen=function(){return document.fullscreenElement&&document.fullscreenElement.nodeName&&document.fullscreenElement.nodeName=="VIDEO"?h():null};a.prototype.seek=function(a,b){b?a.currentTime=Math.min(a.duration,a.currentTime+10):a.currentTime=Math.max(0,a.currentTime-10)};a.prototype.togglePause=function(a){a.paused?a.play():a.pause()};a.prototype.volume=function(a){if(!a||a!=j.UP&&a!=j.DOWN)return;var b=new Map();b.set(j.KEY,a.toString());g.postMessage(this.hostWindow,g.Type.SET_VOLUME,b)};a.prototype.control=function(a,b){__p&&__p();if(b)switch(b){case i.UP:this.volume(j.UP);break;case i.DOWN:this.volume(j.DOWN);break;case i.LEFT:this.seek(a,!1);break;case i.RIGHT:this.seek(a,!0);break;case i.MIDDLE:this.togglePause(a);break}};e.exports=a}),null);
__d("KaiOSLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UPDATE_APP_VERSION:"update_app_version",UPSELL_SHOWN:"upsell_shown",UPSELL_CLICK:"upsell_click",UPSELL_DISMISS:"upsell_dismiss",UPSELL_REDIRECT:"upsell_redirect",UPSELL_ERROR:"upsell_error",PUSH_SUBSCRIPTION_CHANGE:"push_subscription_change",PUSH_SUBSCRIPTION_UPDATE_ERROR:"push_subscription_update_error"})}),null);
__d("KaiOSLoggerEventCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_INFO:"app_info",UPSELL:"upsell",PUSH_SUBSCRIPTION:"push_subscription"})}),null);
__d("KaiOSLogger",["BanzaiLogger","KaiOSLoggerEvent","KaiOSLoggerEventCategory"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a={logAppVersion:function(a){g.log("KaiOSEventsLoggerConfig",{event:h.UPDATE_APP_VERSION,event_category:i.APP_INFO,app_version:a})},logUpsellEvent:function(a){var event;switch(a){case"click":event=h.UPSELL_CLICK;break;case"redirect":event=h.UPSELL_REDIRECT;break;case"error":event=h.UPSELL_ERROR;break}g.log("KaiOSEventsLoggerConfig",{event:event,event_category:i.UPSELL})}};e.exports=a}),null);
__d("MRegMultiStepConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BACK_BUTTON:"reg_back_button",FORM:"multi_step_form",LEGAL_TEXT:"legal_text",LEGAL_TEXT_KOREA:"legal_text_korea",LEGAL_TEXT_CONTACT_IMPORTER:"legal_text_contact_importer",SUBMIT:"multi_step_submit",NEXT:"multi_step_next",BUTTON_BLOCK:"multi_step_next_button_block",HIDDEN:"hidden_elem",WRAPPER:"multi_step_input_wrapper",DISPLAYED_STEP:"multi_step_displayed_step",FOCUS_ME:"focus_me",PROGRESS_BAR_STEP:"progress_bar_step",WELCOME:"multi_step_welcome",LANGUAGE_SELECTOR:"multi_step_language_selector",PASSWORD:"multi_step_password",PASSWORD_STEP_TITLE:"password_step_title",PASSWORD_STEP_BODY:"password_step_body",PASSWORD_STEP_INPUT:"password_step_input",PASSWORD_CHANGE_BUTTON:"password_change_button",PASSWORD_ACCEPT_BUTTON:"password_accept_button",SUGGEST_NEW_PASSWORD_BUTTON:"suggest_new_password_button",PASSWORD_SUGGESTION:"multi_step_password_suggestion",PASSWORD_SUGGESTION_INPUT:"password_suggestion_input",SAVE_PASSWORD:"multi_step_save_password",SKIP_PASSWORD:"multi_step_skip_password",SKIP_PASSWORD_INPUT:"multi_step_skip_password_input",SKIP_PW_GO_BACK:"multi_step_skip_pw_go_back",SKIP_PW_SIGN_UP:"multi_step_skip_pw_sign_up",WAS_ELIGIBLE_FOR_NAME_SUGGESTIONS_INPUT:"was_eligible_for_name_suggestions_input",DID_USE_SUGGESTED_NAME_INPUT:"did_use_suggested_name_input",WAS_SHOWN_NAME_SUGGESTIONS_INPUT:"was_shown_name_suggestions_input",REG_IMPRESSION_ID:"reg_impression_id",STEP_TITLE_TEXT:"step_title_text",NAME_STEP_BODY:"name_step_body",NAME_SUGGESTION_PICKER:"name_suggestion_picker",NAME_SUGGESTION_PICKER_RADIOS:"name_suggestion_picker_options",NAME_SUGGESTION_OPTION:"name_suggestion_option",NONE_OF_THESE_NAMES_OPTION:"none_of_these_names_option",CP_TITLE:"contactpoint_step_title",CP_STEP_BODY:"contactpoint_step_body",CP_INPUT:"contactpoint_step_input",CP_INPUT_LABEL:"contactpoint_step_input_label",CP_TYPE_TOGGLE_UNIT:"contactpoint_type_toggle_unit",SWITCH_PHONE_TO_EMAIL:"switch_phone_to_email",SWITCH_EMAIL_TO_PHONE:"switch_email_to_phone",CHANGE_LANGUAGE:"change_language",DEFAULT_LANGUAGE:"default_language",DISMISS_NO_INTERNET_DIALOG:"dismiss_no_internet_dialog",NUM_SUBMITS:"num_submits",LOGIN_LINK:"login_link",FOOTER_LANGUAGE_SELECTOR:"language_selector",ZERO_HEADER_AF_CLIENT:"zero_header_af_client",BIRTHDAY_STEP_BODY:"birthday_step_body",GENDER_STEP_BODY:"gender_step_body",GENDER_RADIO:"gender_radio",UPLOAD_CONTACTS_BODY:"upload_contacts_body"})}),null);
__d("URLSearchParams",[],(function(a,b,c,d,e,f){__p&&__p();var g=/\+/g,h=/[!\'()*]/g,i=/%20/g;function j(a){return encodeURIComponent(a).replace(i,"+").replace(h,function(a){return"%"+a.charCodeAt(0).toString(16)})}function k(a){return decodeURIComponent(a).replace(g," ")}b=typeof Symbol==="function"?Symbol.iterator:"@@iterator";function a(a){a===void 0&&(a="");a=a;a[0]==="?"&&(a=a.substr(1));this.$1=a.length?a.split("&").map(function(a){a=a.split("=");var b=a[0];a=a[1];return[k(b),k(a)]}):[]}a.prototype.append=function(a,b){"use strict";this.$1.push([a,String(b)])};a.prototype["delete"]=function(a){"use strict";for(var b=0;b<this.$1.length;b++)this.$1[b][0]===a&&(this.$1.splice(b,1),b--)};a.prototype.entries=function(){"use strict";return this.$1[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};a.prototype.get=function(a){"use strict";for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return this.$1[b][1];return null};a.prototype.getAll=function(a){"use strict";var b=[];for(var c=0,d=this.$1.length;c<d;c++)this.$1[c][0]===a&&b.push(this.$1[c][1]);return b};a.prototype.has=function(a){"use strict";for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return!0;return!1};a.prototype.keys=function(){"use strict";var a=this.$1.map(function(a){var b=a[0];a[1];return b});return a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};a.prototype.set=function(a,b){"use strict";var c=!1;for(var d=0;d<this.$1.length;d++)this.$1[d][0]===a&&(c?(this.$1.splice(d,1),d--):(this.$1[d][1]=String(b),c=!0));c||this.$1.push([a,String(b)])};a.prototype.toString=function(){"use strict";return this.$1.map(function(a){var b=a[0];a=a[1];return j(b)+"="+j(a)}).join("&")};a.prototype.values=function(){"use strict";var a=this.$1.map(function(a){a[0];a=a[1];return a});return a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};a.prototype[b]=function(){"use strict";return this.entries()};e.exports=a}),null);
__d("XKaiOSAppJioTagController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/kaiosapp/jio/tag/",{})}),null);
__d("XKaiOSUpdatePushController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/kaiosapp/push/update/",{})}),null);
__d("KaiOSController",["Promise","KaiOSControllerUtils","KaiOSFullscreenVideoHandler","KaiOSLogger","KaiOSSendMessageUtil","MRequest","MViewport","Stratcom","URI","URLSearchParams","XKaiOSUpdatePushController","getActiveElement","isLinkshimURI","promiseDone","MRegMultiStepConstants","XKaiOSAppJioTagController"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";__p&&__p();var w="app://m.facebook.com",x=Object.freeze({APP_INFO:"app_info",UPDATE_PUSH:"update_push",CONFIG_REQUEST:"config_request"}),y=h.createCallbackHandler(),z=h.createConnectionHelper(),A=null,B=new g(function(a,b){A=a}),C=0,D=!1,E=null,F=!1,G=!1,H=!1,I=null,J=!1;function K(a){__p&&__p();if(!(a instanceof Map))return;var b=a.get(k.Action),c=a.get(k.ActionPayload);a=a.get(k.CallbackID);if(y.handleCallback(a,c))return;switch(b){case x.APP_INFO:c&&c.get&&(R.appVersion=c.get("app_version"),D&&(j.logAppVersion(R.appVersion),D=!1),R.setup());break;case x.UPDATE_PUSH:if(c&&c.get){a=c.get("subscription");R.updatePush(a.endpoint,JSON.stringify(a.keys))}break;case x.CONFIG_REQUEST:b=new Map();b.set("show_news_feed_on_notification_back",H);k.postMessage(z.hostWindow,k.Type.CONFIG_RESPONSE,b);break}}function L(a){__p&&__p();if(I&&I.handleClickEvent(a)){a.preventDefault();a.stopPropagation();return}var b=a.target,c=null;b&&b.tagName==="A"?c=b.href:b&&b.parentElement&&b.parentElement.tagName==="A"?c=b.parentElement.href:b&&b.parentElement&&b.parentElement.parentElement&&b.parentElement.parentElement.tagName==="A"&&(c=b.parentElement.parentElement.href);b=new o(c);var d=c!=null&&c!==""&&!/\.facebook.com$/i.test(b.getDomain());c!=null&&(s(b)||d)&&(R.openUrl(c),a.preventDefault(),a.stopPropagation())}function M(a){__p&&__p();if(!G||a!="Backspace"&&a!="BrowserBack")return!1;a=location.pathname.split("/");a=a.length>=2&&a[1]==="reg";if(!a)return!1;a=document.getElementById(u.BACK_BUTTON);if(a&&a.offsetHeight>0){a.click();return!0}return!1}function N(){var a=location.pathname;a=a==="/"||a==="/kaiosapp/jio/home/"||a.startsWith("/home.php")||a.startsWith("/index.php")||a.startsWith("/confirmemail.php");var b=new p(window.location.search);b=b.has("soft");return a&&!b}function O(event){I&&I.handleMouseMoveEvent(event)&&(event.preventDefault(),event.stopPropagation())}function P(event){if(I&&I.handleKeyDownEvent(event)){event.preventDefault();event.stopPropagation();return}switch(event.key){case"Backspace":case"BrowserBack":document.fullscreenElement?(document.exitFullscreen(),event.preventDefault(),event.stopPropagation()):M(event.key)?(event.preventDefault(),event.stopPropagation()):N()&&m.getScrollTop()>5?(m.scrollTo(0,0),event.preventDefault(),event.stopPropagation()):N()||(k.postMessage(z.hostWindow,k.Type.HANDLE_BACK),event.preventDefault(),event.stopPropagation());break;case"Enter":R.appVersion!=null&&event.target.type=="textarea"&&(event.target.blur(),event.preventDefault(),event.stopPropagation())}}function Q(event){if(document.fullscreenElement)document.fullscreenElement.nodeName=="VIDEO"&&(screen.orientation&&screen.orientation.lock("landscape"),document.fullscreenElement.mozRequestPointerLock());else{var a=new Map();a.set("orientation","natural");k.postMessage(z.hostWindow,k.Type.SCREEN_ORIENTATION_LOCK,a)}}var R={appVersion:null,init:function(a){C=a.get("app_id"),D=!!a.get("should_log_app_version"),E=a.get("fbt_strings"),F=!!a.get("open_links_in_app"),H=!!a.get("show_news_feed_on_notification_back"),window.addEventListener("message",R.receiveMessage,!1)},enableBackButtonOnRegPage:function(){G=!0},setup:function(){__p&&__p();F&&window.addEventListener("click",L,!0);window.addEventListener("keydown",P,!1);window.addEventListener("mousemove",O,!0);R.appVersion!=null&&window.addEventListener("fullscreenchange",Q,!1);n.listen("click",["m-composer","composer-submit"],function(a){setTimeout(function(){var b=r();b&&b==a.getNode("composer-submit")&&b.blur()},100)});k.postMessage(z.hostWindow,k.Type.CHECK_FOR_PUSH_UPDATE);if(E!==null&&E!==undefined){var a=new Map();a.set("fbt_strings",E);k.postMessage(z.hostWindow,k.Type.FBT_STRINGS,a)}},sendMessageToAppWithCallback:function(a,b){b=y.setCallback(b);k.postMessage(z.hostWindow,a,null,b)},maybeTagMeAsKaiOSApp:function(){z.hostWindow!=null?R.tagMeAsKaiOSApp():J=!0},tagMeAsKaiOSApp:function(){var a=v.getURIBuilder().getURI();a=new l(a).setMethod("post").setData({is_kaios_app:!0});J=!1;a.send()},waitForKaiOS:function(){return B},registerPush:function(a){a=y.setCallback(a);k.postMessage(z.hostWindow,k.Type.REGISTER_PUSH,null,a)},unregisterPush:function(){t(R.waitForKaiOS(),function(){k.postMessage(z.hostWindow,k.Type.UNREGISTER_PUSH)})},updatePush:function(a,b){var c=q.getURIBuilder().getURI();c=new l(c).setMethod("post").setData({push_endpoint:a,app_id:C,subscription_keys:b});c.listen("done",function(a){a.payload&&a.payload.success&&k.postMessage(z.hostWindow,k.Type.PUSH_UPDATE_COMPLETED)});c.send()},openUrl:function(a){var b=new Map();b.set("url",a);k.postMessage(z.hostWindow,k.Type.OPEN_URL,b)},receiveMessage:function(event){if(!event||w!=event.origin||!event.source)return;A&&(A(),A=null);z.hostWindow||(z.hostWindow=event.source,I=new i(z.hostWindow),k.postMessage(z.hostWindow,k.Type.MESSAGE_RECEIVED));event.data&&K(event.data);J&&R.tagMeAsKaiOSApp()},_setHostWindowUnitTestsOnly:function(a){z.hostWindow=a},isTagIfInsideApp:function(){return J},fetchMsisdn:function(a){a=y.setCallback(a);k.postMessage(z.hostWindow,k.Type.FETCH_MSISDN,null,a)}};e.exports=R}),null);
__d("BrowserPushMessageRedirectUtil",[],(function(a,b,c,d,e,f){a=function(a){return!0};e.exports=a}),null);
__d("BrowserPushCommands",[],(function(a,b,c,d,e,f){a="browser_push_ack";b="browser_push_redirect";c="browser_push_window_visible";d={ACK:a,REDIRECT:b,WINDOW_VISIBLE:c};e.exports=d}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();function m(event){__p&&__p();if(event.data.command&&event.data.command===g.REDIRECT){if(window.onbeforeunload()===undefined)event.ports[0].postMessage({command:g.ACK,success:!0});else{event.ports[0].postMessage({command:g.ACK,success:!1});return}var a=event.data.uri;if(/^([^.:/?#]+):/.test(a)&&!k.isAllowed(/^([^.:/?#]+):/.exec(a)[1])||!l(new j(a)))throw new Error("goURI: URI scheme rejected, URI: "+a);h(a)&&(window.location.href=a)}}a={registerRedirectHandler:function(){i.listen(window,"message",function(event){event.origin===""&&m(event)}),navigator.serviceWorker&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",function(event){(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(event.origin))&&m(event)})}};e.exports=a}),null);
__d("BrowserPushMuteOptions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ZERO:0,FIFTEEN_MINUTES:900,THIRTY_MINUTES:1800,FORTY_FIVE_MINUTES:2700,ONE_HOUR:3600,TWO_HOURS:7200,EIGHT_HOURS:28800,ONE_DAY:86400})}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function(a,b,c,d,e,f,g,h,i){function j(){new h(g.WINDOW_VISIBLE,null).sendViaController()}a={listenForVisibility:function(){i.isHidden()||j(),i.addListener(i.VISIBLE,j)}};e.exports=a}),null);
__d("PushRegistrationUtils",[],(function(a,b,c,d,e,f){"use strict";var g={normalizeSubscriptionEndpoint:function(a){var b=a.endpoint;"subscriptionId"in a&&!new RegExp("/"+a.subscriptionId+"$").test(b)&&(b+="/"+a.subscriptionId);return b},setupPushRegistrationData:function(a,b){var c=g.normalizeSubscriptionEndpoint(a),d=null;a.toJSON?d=a.toJSON().keys:a.keys&&(d=a.keys);return{app_id:b,push_endpoint:c,subscription_keys:JSON.stringify(d)}}};e.exports=g}),null);
__d("XAsyncPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},mute_for:{type:"Enum",enumType:0}})}),null);
__d("XAsyncPushMuteStateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/settings/push/mute/state/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0}})}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushMuteOptions","BrowserPushVisibilityChanger","PushRegistrationUtils","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=window.Notification,r=new Map();s.get=function(a,b){"use strict";if(r.has(b))return r.get(b);a=new s(a,b);r.set(b,a);return a};function s(a,b){"use strict";this.$3=a,this.appID=b,!s.$1&&!s.$2&&(s.$1=!1,s.$2=!1)}s.prototype.getPushSubscription=function(){"use strict";return new g(function(a,b){s.pushPermissionIsDenied()&&b(new Error("No permission or not supported")),l.getWorkerRegistration(this.$3).then(function(c){if(!c){a(null);return}c.pushManager.getSubscription().then(function(b){a(b)})["catch"](b)})["catch"](b)}.bind(this))};s.prototype.$4=function(a,b,c,d){"use strict";a=a.getURIBuilder().getURI();b=new b(a);b.setData(k.setupPushRegistrationData(c,this.appID));b.setMethod("post");b.setHandler&&b.setHandler(function(a){a.payload&&a.payload.session_change&&d()});b.send()};s.prototype.getMutedUntilInServer=function(a){"use strict";__p&&__p();return new g(function(b,c){__p&&__p();this.getPushSubscription().then(function(d){if(d){d=k.normalizeSubscriptionEndpoint(d);d=n.getURIBuilder().setString("push_endpoint",d).setInt("appid",this.appID).getURI();d=new a(d);d.listen("done",function(a){b(a.payload.muteUntilTimestampSec)});d.send()}else c("cannot check mute status for unsubscribed endpoint")}.bind(this))["catch"](c)}.bind(this))};s.prototype.muteNotifications=function(a,b){"use strict";__p&&__p();return new g(function(c,d){__p&&__p();this.getPushSubscription().then(function(e){__p&&__p();if(e){e=k.normalizeSubscriptionEndpoint(e);e=m.getURIBuilder().setEnum("mute_for",a).setString("push_endpoint",e).setInt("appid",this.appID).getURI();e=new b(e);e.setMethod("POST");e.listen("done",function(b){a!==i.ZERO&&b.payload.muteUntilTimestampSec===0?d("operation failed in server"):c(b.payload.muteUntilTimestampSec)});e.send()}else d("no subscription found")}.bind(this))["catch"](d)}.bind(this))};s.prototype.getSubscription=function(){"use strict";return new g(function(a,b){this.getPushSubscription().then(function(b){b?a(k.normalizeSubscriptionEndpoint(b)):a(null)})["catch"](b)}.bind(this))};s.prototype.maybeRegisterPushAgain=function(a,b,c){"use strict";return new g(function(d,e){this.getPushSubscription().then(function(e){e?(this.$4(a,b,e,c),d(k.normalizeSubscriptionEndpoint(e))):d(null)}.bind(this))["catch"](function(){d(null)})}.bind(this))};s.prototype.$5=function(a,b,c){"use strict";__p&&__p();return new g(function(d,e){__p&&__p();if(s.$2&&!c){e(new Error("sending disable info already"));return}s.$2=!0;var f=a.getURIBuilder().getURI();f=new b(f.toString());f.setData({appid:this.appID,from_browser_settings:c});f.setMethod("post");f.listen?(f.listen("finally",d),f.listen("fail",function(){s.$2=!1,e()})):f.setErrorHandler&&f.setHandler?(f.setErrorHandler(function(){s.$2=!1,e()}),f.setHandler(d)):d();f.send()}.bind(this))};s.prototype.isPushRegistered=function(a,b,c,d,e,f,i){e===void 0&&(e=!1);f===void 0&&(f=o);i===void 0&&(i=!1);h.registerRedirectHandler();return new g(function(g,h){this.getPushSubscription().then(function(h){g(!!h||a&&!s.pushPermissionIsPending()),h?e?self.$4(b,d,h,f):j.listenForVisibility():!h&&a&&(s.pushPermissionIsOn()?this.registerPush(b,d,f,i)["catch"](function(){}):this.$5(c,d,!1))}.bind(this))["catch"](function(){a&&this.$5(c,d,!1),i&&l.unregisterControllingWorker(),h()}.bind(this))}.bind(this))};s.prototype.$6=function(){"use strict";return new g(function(a,b){q.requestPermission(a)})};s.prototype.registerPushAndWaitForEndpoint=function(a,b,c,d){"use strict";return new g(function(e,f){this.$7(a,b,c,!0,null,d).then(function(a){if(typeof a!=="string"){f(new Error("registerPushImpl did not return an endpoint"));return}e(a)})["catch"](f)}.bind(this))};s.prototype.registerPushOnKaiOS=function(a,b,c){"use strict";return new g(function(d,e){c.waitForKaiOS().done(function(){c.registerPush(function(c){c=JSON.parse(c.get("push_endpoint"));this.$4(a,b,c,o);d(k.normalizeSubscriptionEndpoint(c))}.bind(this))}.bind(this))}.bind(this))};s.prototype.registerPush=function(a,b,c,d){c===void 0&&(c=o);d===void 0&&(d=!1);return this.registerPushWithFinishedCallBack(a,b,c,null,d)};s.prototype.registerPushWithFinishedCallBack=function(a,b,c,d,e){"use strict";return new g(function(f,g){this.$7(a,b,c,!1,d,e).then(function(a){if(typeof a!=="boolean"){g(new Error("registerPushImpl did not return a boolean"));return}f(a)})["catch"](g)}.bind(this))};s.prototype.$7=function(a,b,c,d,e,f){"use strict";__p&&__p();if(s.$1)return new g(function(a,b){b(new Error("registering already"))});if(!self.PushManager)return g.reject(new Error("PushManager not found."));s.$1=!0;return new g(function(h,i){__p&&__p();var m=l.registerWorkerIfUnregistered(this.$3),n=this.$6();g.all([m,n]).then(function(g){var l=g[0];if(!s.pushPermissionIsOn()){f&&l.unregister();throw new Error("Push permission was denied")}d||h(!0);l.pushManager.subscribe({userVisibleOnly:!0}).then(function(f){d&&h(k.normalizeSubscriptionEndpoint(f)),this.$4(a,b,f,c),e&&e(),j.listenForVisibility()}.bind(this))["catch"](function(a){s.$1=!1,f&&l.unregister(),i(a)})}.bind(this))["catch"](function(a){s.$1=!1,i(a)})}.bind(this))};s.prototype.unregisterPushAndSWOnKaiOS=function(a,b,c,d){"use strict";return new g(function(e,f){this.$5(a,b,d).then(function(){c.unregisterPush(),e()})["catch"](f)}.bind(this))};s.prototype.unregisterPushAndSW=function(a,b){"use strict";return new g(function(c,d){this.$5(a,b,!0).then(function(){p(l.unregisterControllingWorker(),c)})["catch"](d)}.bind(this))};s.prototype.unregisterPushOnly=function(a,b){"use strict";return new g(function(c,d){this.getPushSubscription().then(function(e){e?e.unsubscribe().then(this.$5(a,b,!0)).then(function(){c(!0)})["catch"](d):d()}.bind(this))["catch"](d)}.bind(this))};s.pushPermissionIsPending=function(){"use strict";return window.Notification&&window.Notification.permission==="default"};s.pushPermissionIsOn=function(){"use strict";return window.Notification&&window.Notification.permission==="granted"};s.pushPermissionIsDenied=function(){"use strict";return window.Notification&&window.Notification.permission==="denied"};e.exports=s}),null);
__d("ServiceWorkerLoginAndLogout",["ClientServiceWorkerMessage"],(function(a,b,c,d,e,f,g){function h(a){new g(a,null).sendViaController()}a={login:function(){h("login")},logout:function(){h("logout")}};e.exports=a}),null);
__d("XBrowserPushDisabledController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/disabled/",{})}),null);
__d("ServiceWorkerLoginAndLogoutListener",["KaiOSController","MobileAppDetect","MRequest","PushRegistration","ServiceWorkerLoginAndLogout","Stratcom","XBrowserPushDisabledController"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();a={listen:function(a,b,c,d){__p&&__p();l.listen("click",a,function(){__p&&__p();if(h.is_kaios){if(!d)return;var a=j.get(c,d);a.unregisterPushAndSWOnKaiOS(m,i,g,!1)}else if(b==="login")k.login();else if(b==="logout")k.logout();else throw new Error("bad login type given")})}};e.exports=a}),null);